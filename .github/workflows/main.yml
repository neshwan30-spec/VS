name: Safe Python Runner

on:
  workflow_dispatch:
    inputs:
      python_code:
        description: 'Python code to run'
        required: true

jobs:
  run-safely:
    runs-on: ubuntu-latest
    steps:
    - name: Basic validation
      run: |
        # Simple check for dangerous commands
        CODE="${{ github.event.inputs.python_code }}"
        if [[ "$CODE" == *"os.system"* ]] || [[ "$CODE" == *"subprocess"* ]] || [[ "$CODE" == *"__import__"* ]]; then
          echo "⚠️  Potentially unsafe code detected!"
          exit 1
        fi
        
    - name: Run in container (safer)
      uses: docker://python:3.9-slim
      with:
        args: python -c "${{ github.event.inputs.python_code }}"
